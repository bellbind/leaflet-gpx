<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Drive recorder replayer (2 maps) HD</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Emoji:wght@700&display=swap" rel="stylesheet">
    <script type="module" src="../leaflet-gpx.js"></script>
    <script type="module" src="./drive-plot.js"></script>
    <style>
      html {height: 100%;}
      html, dialog, input {background-color: #3c4044; color: #dddddd;}
      input[type=file] {}
      body {
          width: 1280px;
          heigh: 1080px;
          margin: 0px;
      }
      video::cue {
          opacity: 1;
          background-color: transparent;
      }
    </style>
  </head>
  <body>
    <dialog>
      <form method="dialog">
        <label style="display: block;">Open GPX file: <input type="file" id="gpx" accept=".gpx,application/gpx+xml"/></label>
        <label style="display: block;">Open Recorder file: <input type="file" id="rec" accept=".mp4,video/mp4"/></label>
        <label style="display: block;">Playback 1sec as: <input type="number" id="speed" value="3.995" min="0" step="0.0001"/>sec</label>
        <label style="display: block;">Playback offset:  <input type="number" id="offset" value="0" step="0.05"/>sec</label>
        <menu style="display: flex; align-items: center; justify-content: center;"><button value="default">hide <span>(INFO: right click to reopen)</span></button></menu>
        <hr />
        <label style="display: block;">Import kml: <input type="file" id="kml-import" accept=".kml,application/kml+xml"/></label>
        <hr />
        <label style="display: block;">Youtube URL:  <input id="yt" /> <button id="kml">export kml</button></label>
        <label style="display: block;">Subscript span:  <input id="vtt-span" type="number" value="1" min="0" step="0.5" /> sec <button id="vtt">export vtt</button></label>
        <div style="display: flex; justify-content: right;"><button id="copy">Copy timeline text</button></div>
        <hr />
        <div><label>start(in video): <input id="start" type="time" step="1" /></label><label>end: <input id="end" type="time" step="1" /></label></div>
        <div><button id="compute-speed">compute speed</button>: <label><input id="scale" type="number" step="0.0001"/></label></div>
      </form>
    </dialog>
    <div style="position: relative; border: solid black;">
      <leaflet-gpx id="main" style="position: absolute; top: 0px; left: 960px; width: 320px; height: 400px;"
                   data-info-size="20" data-info-colors="darkblue,crimson" data-hide-download="false" data-show-side-view="hide" data-popup-font-size="16px"
                   data-home-text="<span style='color: green;font-family: Noto Emoji'>&#x1f3e0;</span>"
                   data-cursor-text="&#x1f6b4;" data-cursor-size="40" data-zoom="18"></leaflet-gpx>
      <leaflet-gpx id="sub" style="position: absolute; top: 400px; left: 960px; width: 320px; height: 320px;"
                   data-info-size="15" data-info-colors="darkblue,crimson" data-hide-download="false" data-show-side-view="hide" data-popup-font-size="16px"
                   data-home-text="<span style='color: green;font-family: Noto Emoji'>&#x1f3e0;</span>"
                   data-cursor-text="&#x1f6b4;" data-cursor-size="30"
                   data-info-span="600" data-fixed-center="true" data-hide-control="true" data-stop-info-update="true"></leaflet-gpx>
      <pre id="info-left" style="position: absolute; top: 540px; left: 20px; width: 300px; height: 180px; font-size: 15px; font-family: 'Noto Mono', 'Menlo', 'Consolas', monospace !important;"></pre>
      <pre id="info-middle" style="position: absolute; top: 540px; left: 340px; width: 300px; height: 180px; font-size: 15px; font-family: 'Noto Mono', 'Menlo', 'Consolas', monospace !important;"></pre>
      <pre id="info-right" style="position: absolute; top: 540px; left: 660px; width: 300px; height: 180px; font-size: 15px; font-family: 'Noto Mono', 'Menlo', 'Consolas', monospace !important;"></pre>
      <video style="position: absolute; top: 0px; left:0px; width: 960px; height:540px;"
             controls="controls"><source src=""><track src="" default="default"></video>
      
      <div id="plot" style="position: absolute; top: 720px; left: 0px; width: 720px; height: calc(100vh - 730px);"></div>
      <div id="controls" style="position: absolute; top: 720px; left: 720px; width: 240px; height: calc(100vh - 730px);">
        <button id="put">put marker</button>
      </div>
      <textarea id="list" style="position: absolute; top: 720px; left: 960px; width: 320px; height: calc(100vh - 730px); box-sizing: border-box;"></textarea>
    </div>
  </body>
</html>
